(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{241:function(t,a,s){"use strict";s.r(a);var n={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},o=s(5),e=Object(o.a)(n,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[s("h1",{attrs:{id:"自定义组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义组件")]),t._v(" "),s("p",[t._v("与"),s("code",[t._v("wepy")]),t._v("自定义组件思路不同的是，"),s("code",[t._v("@wxa")]),t._v("完全采用小程序提供的组件化方案。")]),t._v(" "),s("p",[t._v("我们认为采用原生的自定义组件至少有以下几点好处：")]),t._v(" "),s("ul",[s("li",[t._v("官方支持")]),t._v(" "),s("li",[t._v("运行时独立上下文")]),t._v(" "),s("li",[t._v("UI框架支持")])]),t._v(" "),s("p",[t._v("默认条件下，一个原生的自定义组件可以直接在"),s("code",[t._v("wxa")]),t._v("项目中运行，而无需任何额外的配置，编译。")]),t._v(" "),s("p",[t._v("但是，如果项目中的组件想要使用wxa的插件功能，比方说"),s("code",[t._v("redux")]),t._v("的数据同步，那么这个组件需要按照"),s("code",[t._v("wxa")]),t._v("要求：导出默认的组件实例对象或者类。")]),t._v(" "),s("h2",{attrs:{id:"原生组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原生组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 原生组件")]),t._v(" "),s("p",[t._v("引入一个原生组件和小程序原生开发一模一样，只需要在页面或者组件的配置json中指定"),s("code",[t._v("usingComponents")]),t._v("即可。参考"),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信自定义组件"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("在"),s("code",[t._v(".wxa")]),t._v("格式的文件中配置也是一样的：")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("email")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("email")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token script language-javascript"}},[t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Index")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("config")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n{\n    "usingComponents": {\n        "email": "path/to/your/component"\n    }\n}\n'),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("config")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"使用wxa编写组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用wxa编写组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用wxa编写组件")]),t._v(" "),s("p",[t._v("要使用wxa编写自定义组件跟开发普通的页面没有太大的区别，只需要新建一个"),s("code",[t._v(".wxa")]),t._v("的文件，然后在"),s("code",[t._v("config")]),t._v("中配置"),s("code",[t._v("component: true")]),t._v("即可。")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("config")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n{\n    "component": true\n}\n'),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("config")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("在逻辑层，我们需要"),s("strong",[t._v("导出")]),t._v("一个组件实例对象或者类。")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{attrs:{class:"token script language-javascript"}},[t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("Center")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    properties "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        direction"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            value"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'row'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            type"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" String"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{attrs:{class:"token function"}},[t._v("ready")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("setData")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("mainPanel"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token template-string"}},[s("span",{attrs:{class:"token string"}},[t._v("`flex-direction:")]),s("span",{attrs:{class:"token interpolation"}},[s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{attrs:{class:"token keyword"}},[t._v("this")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("direction"),s("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{attrs:{class:"token string"}},[t._v("`")])]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token tag"}},[s("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("这样，我们就完成了一个简单的自定义组件的编写，后续可以发布到npm上跟更多开发者分享你的代码。在"),s("a",{attrs:{href:"https://github.com/Genuifx/wxa-ui/blob/master/src/components/center.wxa",target:"_blank",rel:"noopener noreferrer"}},[t._v("这儿"),s("OutboundLink")],1),t._v("可以看到详细的例子。")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("可以使用"),s("code",[t._v("Router")]),t._v("，"),s("code",[t._v("Wxapi")]),t._v("等提供的装饰器来增强组件的实例。")]),t._v(" "),s("p",[t._v("虽然wxa提供了mixin功能，但是自定义组件官方支持"),s("code",[t._v("behaviors")]),t._v("（类似mixins的代码复用）逻辑，可以考虑优先使用"),s("code",[t._v("behaviors")]),t._v("实现~")])]),t._v(" "),s("h2",{attrs:{id:"使用第三方组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用第三方组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用第三方组件")]),t._v(" "),s("p",[t._v("利用"),s("router-link",{attrs:{to:"./../../cli/"}},[s("code",[t._v("@wxa/cli")])]),t._v("我们可以超级方便的引用任何第三方的组件！🎊")],1),t._v(" "),s("p",[t._v("譬如我们想在项目中使用有赞UI，我们可以先运行"),s("code",[t._v("npm i vant-weapp")]),t._v("安装有赞ui组件。然后在项目json配置文件中直接引用即可：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token property"}},[t._v('"usingComponents"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token property"}},[t._v('"counting"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"vant-weapp/dist/checkbox/index"')]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("编译后的结果为：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token property"}},[t._v('"usingComponents"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{attrs:{class:"token property"}},[t._v('"counting"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"./../npm/vant-weapp/dist/checkbox/index"')]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("wxa将会自动的编译对应的组件及其依赖。")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("wxa-templates")]),t._v(" "),s("p",[t._v("创建项目的时候可以直接使用"),s("a",{attrs:{href:"https://github.com/Genuifx/wxa-templates/tree/master/vant",target:"_blank",rel:"noopener noreferrer"}},[t._v("vant"),s("OutboundLink")],1),t._v("的模板~，高效简洁")])])])},[],!1,null,null,null);e.options.__file="component.md";a.default=e.exports}}]);